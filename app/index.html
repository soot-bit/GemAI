<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Diamond Price Predictor</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <h1>Diamond Price Predictor</h1>
  <form id="predict-form">
    <!-- Categorical inputs -->
    {% for col in features.categorical %}
      <label for="{{col}}">{{ col.capitalize() }} (as integer):</label>
      <input id="{{col}}" name="categorical" type="number" required><br>
    {% endfor %}

    <!-- Numerical inputs -->
    {% for col in features.numerical %}
      <label for="{{col}}">{{ col.capitalize() }}:</label>
      <input id="{{col}}" name="numerical" type="number" step="any" required><br>
    {% endfor %}

    <button type="submit">Predict</button>
  </form>

  <div id="result"></div>

  <script>
    document.getElementById('predict-form').onsubmit = async e => {
      e.preventDefault();
      const form = e.target;
      const catElems = form.querySelectorAll('input[name="categorical"]');
      const numElems = form.querySelectorAll('input[name="numerical"]');
      const data = {
        categorical: Array.from(catElems).map(i=>parseInt(i.value)),
        numerical:   Array.from(numElems).map(i=>parseFloat(i.value))
      };
      const resp = await fetch('/predict', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });
      const json = await resp.json();
      document.getElementById('result').innerText =
        'Predicted price: ' + json.prediction.toFixed(2);
    };
  </script>
</body>
</html>
